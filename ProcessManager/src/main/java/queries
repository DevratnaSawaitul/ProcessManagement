CREATE TABLE tools (
    tool_id SERIAL PRIMARY KEY,
    tool_name CHARACTER VARYING NOT NULL UNIQUE,
    sub_process CHARACTER VARYING NOT NULL DEFAULT '',  -- Added sub_process column
    active BOOLEAN NOT NULL DEFAULT TRUE
);

CREATE TABLE process (
    process_id SERIAL PRIMARY KEY,
    process_name CHARACTER VARYING NOT NULL UNIQUE,
    active BOOLEAN NOT NULL DEFAULT TRUE
);

CREATE TABLE skills (
    skill_id SERIAL PRIMARY KEY,
    skill_name CHARACTER VARYING NOT NULL,
    active BOOLEAN NOT NULL DEFAULT TRUE
);

CREATE TABLE sheets (
    sheet_id SERIAL PRIMARY KEY,
    file_name CHARACTER VARYING NOT NULL,
    version CHARACTER VARYING NOT NULL,
    date CHARACTER VARYING NOT NULL, 
    department CHARACTER VARYING NOT NULL,
    design_no CHARACTER VARYING NOT NULL,
    floor CHARACTER VARYING NOT NULL,
    date_of_last_update CHARACTER VARYING NOT NULL, 
    last_updated_by CHARACTER VARYING NOT NULL
);

CREATE TABLE sheet_process (
    sheet_process_id SERIAL PRIMARY KEY,
    file_name CHARACTER VARYING NOT NULL,
    process_name CHARACTER VARYING NOT NULL
);

CREATE TABLE subprocesses (
    subprocess_id SERIAL PRIMARY KEY,
    process_name CHARACTER VARYING NOT NULL,  
    subprocess_name CHARACTER VARYING NOT NULL,
    active BOOLEAN NOT NULL DEFAULT TRUE
);

CREATE TABLE steps (
    step_id SERIAL PRIMARY KEY,
    file_name CHARACTER VARYING NOT NULL,  
    process_name CHARACTER VARYING NOT NULL DEFAULT '', 
    subprocess_name CHARACTER VARYING NOT NULL DEFAULT '',  
    step_number INT NOT NULL,
    tool_name CHARACTER VARYING NOT NULL DEFAULT '',
    tool_spec CHARACTER VARYING NOT NULL DEFAULT '',
    special_instruction TEXT NOT NULL DEFAULT '',
    skill CHARACTER VARYING NOT NULL DEFAULT '',
    time_minutes INT NOT NULL,
    image_url TEXT DEFAULT '',
	sheet_process_id BIGINT
);

CREATE TABLE system_settings (
    id SERIAL PRIMARY KEY,
    key CHARACTER VARYING NOT NULL UNIQUE,
    value CHARACTER VARYING NOT NULL
);

INSERT INTO tools (tool_name, sub_process, active)
VALUES 
    ('Round Bur', 'Hole Making', TRUE),
    ('Emmery Paper', 'Finishing', TRUE),
    ('Plyer', 'Jumpring Fitting', TRUE),
    ('Measuring Scale', 'Chain Measurement', TRUE),
    ('Cutter', 'Chain Measurement', TRUE),
    ('Black Stone', 'Sprue Finishing', TRUE),
    ('English Burnish', 'Burnishing', TRUE),
    ('Pencil Buff', 'Jumpring Finishing', TRUE);

-- Inserting into process
INSERT INTO process (process_name, active)
VALUES 
    ('Filing', TRUE),
    ('Chain Making', TRUE);

-- Inserting into skills
INSERT INTO skills (skill_name, active)
VALUES 
    ('SK', TRUE),
    ('CK', TRUE);

-- Inserting into subprocesses
INSERT INTO subprocesses (process_name, subprocess_name, active)
VALUES 
    ('Filing', 'Hole Making', TRUE),
    ('Filing', 'Finishing', TRUE),
    ('Filing', 'Chain Insertion', TRUE),
    ('Chain Making', 'Jumpring Fitting', TRUE),
    ('Chain Making', 'Chain Measurement', TRUE),
    ('Chain Making', 'Jumpring Fitting', TRUE),
    ('Chain Making', 'Lock Fitting', TRUE),
    ('Chain Making', 'Laser Welding on Jumpring Joints', TRUE),
    ('Filing', 'Sprue Finishing', TRUE),
    ('Filing', 'Burnishing', TRUE),
    ('Filing', 'Finishing', TRUE),
    ('Filing', 'Jumpring Finishing', TRUE);

INSERT INTO system_settings ("key", "value") VALUES ('username', 'superadmin');
INSERT INTO system_settings ("key", "value") VALUES ('password', 'Admin@123');
